#!/usr/bin/R -f
# 
# 
# Simple example for rollply.r: make the average of a random walk
# 
# 


# Parameters
RW_LENGTH <- 1000
RW_NA_ADDED <- 900

RW <- rbinom(RW_LENGTH,1,.5)
RW[RW==0] <- -1
RW <- cumsum(RW)
RW[sample(length(RW),RW_NA_ADDED)] <- NA

# Build input df
RW <- data.frame(time=seq_along(RW), position=RW)

# Inspect input


# Build moving average
rollply(RW, ~time, mean)
